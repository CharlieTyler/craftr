<div class="alert alert-danger" role="alert">
  <strong>Warning</strong> If forms look funny, just reload the page - something to do with Turbolinks
</div>
<div class = "container">
  <div class = "row">
    <div class = "col-md-6">
      <h4>Featured products</h4>
        <%= form_tag(admin_features_path, method: :patch) do %>
          <%= select_tag :product_id, options_from_collection_for_select(@products, :id, :name, @featured_product_ids), multiple: true, class: "multiselect_products" %>
          <%= submit_tag "Edit featured products", class: "btn btn-primary" %>
        <% end %>
    </div>

    <div class = "col-md-6">
      <h4>Featured Categories</h4>
        <%= form_tag(admin_features_path, method: :patch) do %>
          <%= select_tag :category_id, options_from_collection_for_select(@categories, :id, :name, @featured_category_ids), multiple: true, class: "multiselect_categories" %>
          <%= submit_tag "Edit featured categories", class: "btn btn-secondary" %>
        <% end %>
    </div>
  </div>
</div>

<script>
  $(document).ready(function() {
    $('.multiselect_products').multiselect({
      enableFiltering: true,
      enableCaseInsensitiveFiltering: true
    });
  });

  $(document).ready(function() {
    $('.multiselect_categories').multiselect({
      enableFiltering: true,
      enableCaseInsensitiveFiltering: true
    });
  });
</script>
